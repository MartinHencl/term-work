-- MySQL Script generated by MySQL Workbench
-- Sat Jan 19 09:48:28 2019
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema term_db
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS `term_db` ;

-- -----------------------------------------------------
-- Schema term_db
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `term_db` DEFAULT CHARACTER SET utf8 ;
USE `term_db` ;

-- -----------------------------------------------------
-- Table `term_db`.`JIZDY`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `term_db`.`JIZDY` ;

CREATE TABLE IF NOT EXISTS `term_db`.`JIZDY` (
  `ID_JIZDY` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `DATUM_VZNIKU` DATETIME NOT NULL,
  `DATUM_ZACATKU` DATETIME NULL,
  `DATUM_KONCE` DATETIME NULL,
  `NAJETO` INT NULL,
  `STAV` VARCHAR(45) NOT NULL,
  `UZIVATEL_ID_UZIVATEL` INT UNSIGNED NOT NULL,
  `VOZIDLO_ID_VOZIDLA` INT UNSIGNED NOT NULL,
  PRIMARY KEY (`ID_JIZDY`),
  INDEX `fk_JIZDY_UZIVATEL_idx` (`UZIVATEL_ID_UZIVATEL` ASC),
  INDEX `fk_JIZDY_VOZIDLO1_idx` (`VOZIDLO_ID_VOZIDLA` ASC),
  CONSTRAINT `fk_JIZDY_UZIVATEL`
    FOREIGN KEY (`UZIVATEL_ID_UZIVATEL`)
    REFERENCES `term_db`.`UZIVATEL` (`ID_UZIVATEL`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_JIZDY_VOZIDLO1`
    FOREIGN KEY (`VOZIDLO_ID_VOZIDLA`)
    REFERENCES `term_db`.`VOZIDLO` (`ID_VOZIDLA`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);


-- -----------------------------------------------------
-- Table `term_db`.`UZIVATEL`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `term_db`.`UZIVATEL` ;

CREATE TABLE IF NOT EXISTS `term_db`.`UZIVATEL` (
  `ID_UZIVATEL` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `EMAIL` VARCHAR(100) NOT NULL,
  `JMENO` VARCHAR(100) NOT NULL,
  `PRIJMENI` VARCHAR(100) NOT NULL,
  `HESLO` VARCHAR(150) NOT NULL,
  `ROLE` VARCHAR(45) NOT NULL,
  `TELEFON` VARCHAR(45) NULL,
  PRIMARY KEY (`ID_UZIVATEL`),
  UNIQUE INDEX `EMAIL_UNIQUE` (`EMAIL` ASC));


-- -----------------------------------------------------
-- Table `term_db`.`VOZIDLO`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `term_db`.`VOZIDLO` ;

CREATE TABLE IF NOT EXISTS `term_db`.`VOZIDLO` (
  `ID_VOZIDLA` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `JMENO` VARCHAR(150) NOT NULL,
  `CENA` INT NOT NULL,
  `PUVODNI_NAJETO` INT UNSIGNED NOT NULL,
  `ZNACKA_VOZU_ID_ZNACKA_VOZU` INT UNSIGNED NOT NULL,
  PRIMARY KEY (`ID_VOZIDLA`),
  INDEX `fk_VOZIDLO_ZNACKA_VOZU1_idx` (`ZNACKA_VOZU_ID_ZNACKA_VOZU` ASC) ,
  CONSTRAINT `fk_VOZIDLO_ZNACKA_VOZU1`
    FOREIGN KEY (`ZNACKA_VOZU_ID_ZNACKA_VOZU`)
    REFERENCES `term_db`.`ZNACKA_VOZU` (`ID_ZNACKA_VOZU`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);


-- -----------------------------------------------------
-- Table `term_db`.`VOZIDLO_HAS_VYBAVENI`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `term_db`.`VOZIDLO_HAS_VYBAVENI` ;

CREATE TABLE IF NOT EXISTS `term_db`.`VOZIDLO_HAS_VYBAVENI` (
  `VOZIDLO_ID_VOZIDLA` INT UNSIGNED NOT NULL,
  `VYBAVENI_ID_VYBAVENI` INT UNSIGNED NOT NULL,
  `HODNOTA` VARCHAR(150) NULL,
  PRIMARY KEY (`VOZIDLO_ID_VOZIDLA`, `VYBAVENI_ID_VYBAVENI`),
  INDEX `fk_VOZIDLO_has_VYBAVENI_VYBAVENI1_idx` (`VYBAVENI_ID_VYBAVENI` ASC),
  INDEX `fk_VOZIDLO_has_VYBAVENI_VOZIDLO1_idx` (`VOZIDLO_ID_VOZIDLA` ASC) ,
  CONSTRAINT `fk_VOZIDLO_has_VYBAVENI_VOZIDLO1`
    FOREIGN KEY (`VOZIDLO_ID_VOZIDLA`)
    REFERENCES `term_db`.`VOZIDLO` (`ID_VOZIDLA`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_VOZIDLO_has_VYBAVENI_VYBAVENI1`
    FOREIGN KEY (`VYBAVENI_ID_VYBAVENI`)
    REFERENCES `term_db`.`VYBAVENI` (`ID_VYBAVENI`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);


-- -----------------------------------------------------
-- Table `term_db`.`VYBAVENI`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `term_db`.`VYBAVENI` ;

CREATE TABLE IF NOT EXISTS `term_db`.`VYBAVENI` (
  `ID_VYBAVENI` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `VYBAVENI` VARCHAR(150) NOT NULL,
  PRIMARY KEY (`ID_VYBAVENI`));


-- -----------------------------------------------------
-- Table `term_db`.`ZNACKA_VOZU`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `term_db`.`ZNACKA_VOZU` ;

CREATE TABLE IF NOT EXISTS `term_db`.`ZNACKA_VOZU` (
  `ID_ZNACKA_VOZU` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `ZNACKA` VARCHAR(100) NOT NULL,
  PRIMARY KEY (`ID_ZNACKA_VOZU`),
  UNIQUE INDEX `ZNACKA_UNIQUE` (`ZNACKA` ASC))
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
